const staticCacheName = "site-static-v1";

const assets = [
  "./",
  "./index.html",
  "./online-version/online.html",
  "./offline-version/offline.html",
  "./static/iowacounty.json",
  "./core/api.js",
  "./core/background_sync.js",
  "./core/constant.js",
  "./core/imageprops.js",
  "./core/indexeddb.js",
  "./offline-version/offline_app.js",
  "./online-version/online_app.js",
  "./core/raster.js",
  "./core/rasterbusiness.js",
  "./core/worker_hand.js",
  "./core/worker_delineate.js",
  "./open-layers/libs/v6.3.1-dist/ol.css",
  "./open-layers/libs/v6.3.1-dist/ol.css.map",
  "./open-layers/libs/v6.3.1-dist/ol.js",
  "./open-layers/libs/v6.3.1-dist/ol.js.map",
  "./img/load.gif",
  "./img/dummy.png",
  "./img/icon/map.png",
  "./map/iowa_counties/tiles/10/249/378.png",
  "./map/iowa_counties/tiles/10/249/379.png",
  "./map/iowa_counties/tiles/10/249/380.png",
  "./map/iowa_counties/tiles/10/249/381.png",
  "./map/iowa_counties/tiles/10/249/382.png",
  "./map/iowa_counties/tiles/10/249/383.png",
  "./map/iowa_counties/tiles/10/250/378.png",
  "./map/iowa_counties/tiles/10/250/379.png",
  "./map/iowa_counties/tiles/10/250/380.png",
  "./map/iowa_counties/tiles/10/250/381.png",
  "./map/iowa_counties/tiles/10/250/382.png",
  "./map/iowa_counties/tiles/10/250/383.png",
  "./map/iowa_counties/tiles/10/251/378.png",
  "./map/iowa_counties/tiles/10/251/379.png",
  "./map/iowa_counties/tiles/10/251/380.png",
  "./map/iowa_counties/tiles/10/251/381.png",
  "./map/iowa_counties/tiles/10/251/382.png",
  "./map/iowa_counties/tiles/10/251/383.png",
  "./map/iowa_counties/tiles/10/252/378.png",
  "./map/iowa_counties/tiles/10/252/379.png",
  "./map/iowa_counties/tiles/10/252/380.png",
  "./map/iowa_counties/tiles/10/252/381.png",
  "./map/iowa_counties/tiles/10/252/382.png",
  "./map/iowa_counties/tiles/10/252/383.png",
  "./map/iowa_counties/tiles/10/253/378.png",
  "./map/iowa_counties/tiles/10/253/379.png",
  "./map/iowa_counties/tiles/10/253/380.png",
  "./map/iowa_counties/tiles/10/253/381.png",
  "./map/iowa_counties/tiles/10/253/382.png",
  "./map/iowa_counties/tiles/10/253/383.png",
  "./map/iowa_counties/tiles/10/254/378.png",
  "./map/iowa_counties/tiles/10/254/379.png",
  "./map/iowa_counties/tiles/10/254/380.png",
  "./map/iowa_counties/tiles/10/254/381.png",
  "./map/iowa_counties/tiles/10/254/382.png",
  "./map/iowa_counties/tiles/10/254/383.png",
  "./map/iowa_counties/tiles/10/255/378.png",
  "./map/iowa_counties/tiles/10/255/379.png",
  "./map/iowa_counties/tiles/10/255/380.png",
  "./map/iowa_counties/tiles/10/255/381.png",
  "./map/iowa_counties/tiles/10/255/382.png",
  "./map/iowa_counties/tiles/10/255/383.png",
  "./map/iowa_counties/tiles/11/498/757.png",
  "./map/iowa_counties/tiles/11/498/758.png",
  "./map/iowa_counties/tiles/11/498/759.png",
  "./map/iowa_counties/tiles/11/498/760.png",
  "./map/iowa_counties/tiles/11/498/761.png",
  "./map/iowa_counties/tiles/11/498/762.png",
  "./map/iowa_counties/tiles/11/498/763.png",
  "./map/iowa_counties/tiles/11/498/764.png",
  "./map/iowa_counties/tiles/11/498/765.png",
  "./map/iowa_counties/tiles/11/499/757.png",
  "./map/iowa_counties/tiles/11/499/758.png",
  "./map/iowa_counties/tiles/11/499/759.png",
  "./map/iowa_counties/tiles/11/499/760.png",
  "./map/iowa_counties/tiles/11/499/761.png",
  "./map/iowa_counties/tiles/11/499/762.png",
  "./map/iowa_counties/tiles/11/499/763.png",
  "./map/iowa_counties/tiles/11/499/764.png",
  "./map/iowa_counties/tiles/11/499/765.png",
  "./map/iowa_counties/tiles/11/500/757.png",
  "./map/iowa_counties/tiles/11/500/758.png",
  "./map/iowa_counties/tiles/11/500/759.png",
  "./map/iowa_counties/tiles/11/500/760.png",
  "./map/iowa_counties/tiles/11/500/761.png",
  "./map/iowa_counties/tiles/11/500/762.png",
  "./map/iowa_counties/tiles/11/500/763.png",
  "./map/iowa_counties/tiles/11/500/764.png",
  "./map/iowa_counties/tiles/11/500/765.png",
  "./map/iowa_counties/tiles/11/501/757.png",
  "./map/iowa_counties/tiles/11/501/758.png",
  "./map/iowa_counties/tiles/11/501/759.png",
  "./map/iowa_counties/tiles/11/501/760.png",
  "./map/iowa_counties/tiles/11/501/761.png",
  "./map/iowa_counties/tiles/11/501/762.png",
  "./map/iowa_counties/tiles/11/501/763.png",
  "./map/iowa_counties/tiles/11/501/764.png",
  "./map/iowa_counties/tiles/11/501/765.png",
  "./map/iowa_counties/tiles/11/502/757.png",
  "./map/iowa_counties/tiles/11/502/758.png",
  "./map/iowa_counties/tiles/11/502/759.png",
  "./map/iowa_counties/tiles/11/502/760.png",
  "./map/iowa_counties/tiles/11/502/761.png",
  "./map/iowa_counties/tiles/11/502/762.png",
  "./map/iowa_counties/tiles/11/502/763.png",
  "./map/iowa_counties/tiles/11/502/764.png",
  "./map/iowa_counties/tiles/11/502/765.png",
  "./map/iowa_counties/tiles/11/503/757.png",
  "./map/iowa_counties/tiles/11/503/758.png",
  "./map/iowa_counties/tiles/11/503/759.png",
  "./map/iowa_counties/tiles/11/503/760.png",
  "./map/iowa_counties/tiles/11/503/761.png",
  "./map/iowa_counties/tiles/11/503/762.png",
  "./map/iowa_counties/tiles/11/503/763.png",
  "./map/iowa_counties/tiles/11/503/764.png",
  "./map/iowa_counties/tiles/11/503/765.png",
  "./map/iowa_counties/tiles/11/504/757.png",
  "./map/iowa_counties/tiles/11/504/758.png",
  "./map/iowa_counties/tiles/11/504/759.png",
  "./map/iowa_counties/tiles/11/504/760.png",
  "./map/iowa_counties/tiles/11/504/761.png",
  "./map/iowa_counties/tiles/11/504/762.png",
  "./map/iowa_counties/tiles/11/504/763.png",
  "./map/iowa_counties/tiles/11/504/764.png",
  "./map/iowa_counties/tiles/11/504/765.png",
  "./map/iowa_counties/tiles/11/505/757.png",
  "./map/iowa_counties/tiles/11/505/758.png",
  "./map/iowa_counties/tiles/11/505/759.png",
  "./map/iowa_counties/tiles/11/505/760.png",
  "./map/iowa_counties/tiles/11/505/761.png",
  "./map/iowa_counties/tiles/11/505/762.png",
  "./map/iowa_counties/tiles/11/505/763.png",
  "./map/iowa_counties/tiles/11/505/764.png",
  "./map/iowa_counties/tiles/11/505/765.png",
  "./map/iowa_counties/tiles/11/506/757.png",
  "./map/iowa_counties/tiles/11/506/758.png",
  "./map/iowa_counties/tiles/11/506/759.png",
  "./map/iowa_counties/tiles/11/506/760.png",
  "./map/iowa_counties/tiles/11/506/761.png",
  "./map/iowa_counties/tiles/11/506/762.png",
  "./map/iowa_counties/tiles/11/506/763.png",
  "./map/iowa_counties/tiles/11/506/764.png",
  "./map/iowa_counties/tiles/11/506/765.png",
  "./map/iowa_counties/tiles/11/507/757.png",
  "./map/iowa_counties/tiles/11/507/758.png",
  "./map/iowa_counties/tiles/11/507/759.png",
  "./map/iowa_counties/tiles/11/507/760.png",
  "./map/iowa_counties/tiles/11/507/761.png",
  "./map/iowa_counties/tiles/11/507/762.png",
  "./map/iowa_counties/tiles/11/507/763.png",
  "./map/iowa_counties/tiles/11/507/764.png",
  "./map/iowa_counties/tiles/11/507/765.png",
  "./map/iowa_counties/tiles/11/508/757.png",
  "./map/iowa_counties/tiles/11/508/758.png",
  "./map/iowa_counties/tiles/11/508/759.png",
  "./map/iowa_counties/tiles/11/508/760.png",
  "./map/iowa_counties/tiles/11/508/761.png",
  "./map/iowa_counties/tiles/11/508/762.png",
  "./map/iowa_counties/tiles/11/508/763.png",
  "./map/iowa_counties/tiles/11/508/764.png",
  "./map/iowa_counties/tiles/11/508/765.png",
  "./map/iowa_counties/tiles/11/509/757.png",
  "./map/iowa_counties/tiles/11/509/758.png",
  "./map/iowa_counties/tiles/11/509/759.png",
  "./map/iowa_counties/tiles/11/509/760.png",
  "./map/iowa_counties/tiles/11/509/761.png",
  "./map/iowa_counties/tiles/11/509/762.png",
  "./map/iowa_counties/tiles/11/509/763.png",
  "./map/iowa_counties/tiles/11/509/764.png",
  "./map/iowa_counties/tiles/11/509/765.png",
  "./map/iowa_counties/tiles/11/510/757.png",
  "./map/iowa_counties/tiles/11/510/758.png",
  "./map/iowa_counties/tiles/11/510/759.png",
  "./map/iowa_counties/tiles/11/510/760.png",
  "./map/iowa_counties/tiles/11/510/761.png",
  "./map/iowa_counties/tiles/11/510/762.png",
  "./map/iowa_counties/tiles/11/510/763.png",
  "./map/iowa_counties/tiles/11/510/764.png",
  "./map/iowa_counties/tiles/11/510/765.png",
  "./map/iowa_counties/tiles/12/1000/1515.png",
  "./map/iowa_counties/tiles/12/1000/1516.png",
  "./map/iowa_counties/tiles/12/1000/1517.png",
  "./map/iowa_counties/tiles/12/1000/1518.png",
  "./map/iowa_counties/tiles/12/1000/1519.png",
  "./map/iowa_counties/tiles/12/1000/1520.png",
  "./map/iowa_counties/tiles/12/1000/1521.png",
  "./map/iowa_counties/tiles/12/1000/1522.png",
  "./map/iowa_counties/tiles/12/1000/1523.png",
  "./map/iowa_counties/tiles/12/1000/1524.png",
  "./map/iowa_counties/tiles/12/1000/1525.png",
  "./map/iowa_counties/tiles/12/1000/1526.png",
  "./map/iowa_counties/tiles/12/1000/1527.png",
  "./map/iowa_counties/tiles/12/1000/1528.png",
  "./map/iowa_counties/tiles/12/1000/1529.png",
  "./map/iowa_counties/tiles/12/1000/1530.png",
  "./map/iowa_counties/tiles/12/1000/1531.png",
  "./map/iowa_counties/tiles/12/1001/1515.png",
  "./map/iowa_counties/tiles/12/1001/1516.png",
  "./map/iowa_counties/tiles/12/1001/1517.png",
  "./map/iowa_counties/tiles/12/1001/1518.png",
  "./map/iowa_counties/tiles/12/1001/1519.png",
  "./map/iowa_counties/tiles/12/1001/1520.png",
  "./map/iowa_counties/tiles/12/1001/1521.png",
  "./map/iowa_counties/tiles/12/1001/1522.png",
  "./map/iowa_counties/tiles/12/1001/1523.png",
  "./map/iowa_counties/tiles/12/1001/1524.png",
  "./map/iowa_counties/tiles/12/1001/1525.png",
  "./map/iowa_counties/tiles/12/1001/1526.png",
  "./map/iowa_counties/tiles/12/1001/1527.png",
  "./map/iowa_counties/tiles/12/1001/1528.png",
  "./map/iowa_counties/tiles/12/1001/1529.png",
  "./map/iowa_counties/tiles/12/1001/1530.png",
  "./map/iowa_counties/tiles/12/1001/1531.png",
  "./map/iowa_counties/tiles/12/1002/1515.png",
  "./map/iowa_counties/tiles/12/1002/1516.png",
  "./map/iowa_counties/tiles/12/1002/1517.png",
  "./map/iowa_counties/tiles/12/1002/1518.png",
  "./map/iowa_counties/tiles/12/1002/1519.png",
  "./map/iowa_counties/tiles/12/1002/1520.png",
  "./map/iowa_counties/tiles/12/1002/1521.png",
  "./map/iowa_counties/tiles/12/1002/1522.png",
  "./map/iowa_counties/tiles/12/1002/1523.png",
  "./map/iowa_counties/tiles/12/1002/1524.png",
  "./map/iowa_counties/tiles/12/1002/1525.png",
  "./map/iowa_counties/tiles/12/1002/1526.png",
  "./map/iowa_counties/tiles/12/1002/1527.png",
  "./map/iowa_counties/tiles/12/1002/1528.png",
  "./map/iowa_counties/tiles/12/1002/1529.png",
  "./map/iowa_counties/tiles/12/1002/1530.png",
  "./map/iowa_counties/tiles/12/1002/1531.png",
  "./map/iowa_counties/tiles/12/1003/1515.png",
  "./map/iowa_counties/tiles/12/1003/1516.png",
  "./map/iowa_counties/tiles/12/1003/1517.png",
  "./map/iowa_counties/tiles/12/1003/1518.png",
  "./map/iowa_counties/tiles/12/1003/1519.png",
  "./map/iowa_counties/tiles/12/1003/1520.png",
  "./map/iowa_counties/tiles/12/1003/1521.png",
  "./map/iowa_counties/tiles/12/1003/1522.png",
  "./map/iowa_counties/tiles/12/1003/1523.png",
  "./map/iowa_counties/tiles/12/1003/1524.png",
  "./map/iowa_counties/tiles/12/1003/1525.png",
  "./map/iowa_counties/tiles/12/1003/1526.png",
  "./map/iowa_counties/tiles/12/1003/1527.png",
  "./map/iowa_counties/tiles/12/1003/1528.png",
  "./map/iowa_counties/tiles/12/1003/1529.png",
  "./map/iowa_counties/tiles/12/1003/1530.png",
  "./map/iowa_counties/tiles/12/1003/1531.png",
  "./map/iowa_counties/tiles/12/1004/1515.png",
  "./map/iowa_counties/tiles/12/1004/1516.png",
  "./map/iowa_counties/tiles/12/1004/1517.png",
  "./map/iowa_counties/tiles/12/1004/1518.png",
  "./map/iowa_counties/tiles/12/1004/1519.png",
  "./map/iowa_counties/tiles/12/1004/1520.png",
  "./map/iowa_counties/tiles/12/1004/1521.png",
  "./map/iowa_counties/tiles/12/1004/1522.png",
  "./map/iowa_counties/tiles/12/1004/1523.png",
  "./map/iowa_counties/tiles/12/1004/1524.png",
  "./map/iowa_counties/tiles/12/1004/1525.png",
  "./map/iowa_counties/tiles/12/1004/1526.png",
  "./map/iowa_counties/tiles/12/1004/1527.png",
  "./map/iowa_counties/tiles/12/1004/1528.png",
  "./map/iowa_counties/tiles/12/1004/1529.png",
  "./map/iowa_counties/tiles/12/1004/1530.png",
  "./map/iowa_counties/tiles/12/1004/1531.png",
  "./map/iowa_counties/tiles/12/1005/1515.png",
  "./map/iowa_counties/tiles/12/1005/1516.png",
  "./map/iowa_counties/tiles/12/1005/1517.png",
  "./map/iowa_counties/tiles/12/1005/1518.png",
  "./map/iowa_counties/tiles/12/1005/1519.png",
  "./map/iowa_counties/tiles/12/1005/1520.png",
  "./map/iowa_counties/tiles/12/1005/1521.png",
  "./map/iowa_counties/tiles/12/1005/1522.png",
  "./map/iowa_counties/tiles/12/1005/1523.png",
  "./map/iowa_counties/tiles/12/1005/1524.png",
  "./map/iowa_counties/tiles/12/1005/1525.png",
  "./map/iowa_counties/tiles/12/1005/1526.png",
  "./map/iowa_counties/tiles/12/1005/1527.png",
  "./map/iowa_counties/tiles/12/1005/1528.png",
  "./map/iowa_counties/tiles/12/1005/1529.png",
  "./map/iowa_counties/tiles/12/1005/1530.png",
  "./map/iowa_counties/tiles/12/1005/1531.png",
  "./map/iowa_counties/tiles/12/1006/1515.png",
  "./map/iowa_counties/tiles/12/1006/1516.png",
  "./map/iowa_counties/tiles/12/1006/1517.png",
  "./map/iowa_counties/tiles/12/1006/1518.png",
  "./map/iowa_counties/tiles/12/1006/1519.png",
  "./map/iowa_counties/tiles/12/1006/1520.png",
  "./map/iowa_counties/tiles/12/1006/1521.png",
  "./map/iowa_counties/tiles/12/1006/1522.png",
  "./map/iowa_counties/tiles/12/1006/1523.png",
  "./map/iowa_counties/tiles/12/1006/1524.png",
  "./map/iowa_counties/tiles/12/1006/1525.png",
  "./map/iowa_counties/tiles/12/1006/1526.png",
  "./map/iowa_counties/tiles/12/1006/1527.png",
  "./map/iowa_counties/tiles/12/1006/1528.png",
  "./map/iowa_counties/tiles/12/1006/1529.png",
  "./map/iowa_counties/tiles/12/1006/1530.png",
  "./map/iowa_counties/tiles/12/1006/1531.png",
  "./map/iowa_counties/tiles/12/1007/1515.png",
  "./map/iowa_counties/tiles/12/1007/1516.png",
  "./map/iowa_counties/tiles/12/1007/1517.png",
  "./map/iowa_counties/tiles/12/1007/1518.png",
  "./map/iowa_counties/tiles/12/1007/1519.png",
  "./map/iowa_counties/tiles/12/1007/1520.png",
  "./map/iowa_counties/tiles/12/1007/1521.png",
  "./map/iowa_counties/tiles/12/1007/1522.png",
  "./map/iowa_counties/tiles/12/1007/1523.png",
  "./map/iowa_counties/tiles/12/1007/1524.png",
  "./map/iowa_counties/tiles/12/1007/1525.png",
  "./map/iowa_counties/tiles/12/1007/1526.png",
  "./map/iowa_counties/tiles/12/1007/1527.png",
  "./map/iowa_counties/tiles/12/1007/1528.png",
  "./map/iowa_counties/tiles/12/1007/1529.png",
  "./map/iowa_counties/tiles/12/1007/1530.png",
  "./map/iowa_counties/tiles/12/1007/1531.png",
  "./map/iowa_counties/tiles/12/1008/1515.png",
  "./map/iowa_counties/tiles/12/1008/1516.png",
  "./map/iowa_counties/tiles/12/1008/1517.png",
  "./map/iowa_counties/tiles/12/1008/1518.png",
  "./map/iowa_counties/tiles/12/1008/1519.png",
  "./map/iowa_counties/tiles/12/1008/1520.png",
  "./map/iowa_counties/tiles/12/1008/1521.png",
  "./map/iowa_counties/tiles/12/1008/1522.png",
  "./map/iowa_counties/tiles/12/1008/1523.png",
  "./map/iowa_counties/tiles/12/1008/1524.png",
  "./map/iowa_counties/tiles/12/1008/1525.png",
  "./map/iowa_counties/tiles/12/1008/1526.png",
  "./map/iowa_counties/tiles/12/1008/1527.png",
  "./map/iowa_counties/tiles/12/1008/1528.png",
  "./map/iowa_counties/tiles/12/1008/1529.png",
  "./map/iowa_counties/tiles/12/1008/1530.png",
  "./map/iowa_counties/tiles/12/1008/1531.png",
  "./map/iowa_counties/tiles/12/1009/1515.png",
  "./map/iowa_counties/tiles/12/1009/1516.png",
  "./map/iowa_counties/tiles/12/1009/1517.png",
  "./map/iowa_counties/tiles/12/1009/1518.png",
  "./map/iowa_counties/tiles/12/1009/1519.png",
  "./map/iowa_counties/tiles/12/1009/1520.png",
  "./map/iowa_counties/tiles/12/1009/1521.png",
  "./map/iowa_counties/tiles/12/1009/1522.png",
  "./map/iowa_counties/tiles/12/1009/1523.png",
  "./map/iowa_counties/tiles/12/1009/1524.png",
  "./map/iowa_counties/tiles/12/1009/1525.png",
  "./map/iowa_counties/tiles/12/1009/1526.png",
  "./map/iowa_counties/tiles/12/1009/1527.png",
  "./map/iowa_counties/tiles/12/1009/1528.png",
  "./map/iowa_counties/tiles/12/1009/1529.png",
  "./map/iowa_counties/tiles/12/1009/1530.png",
  "./map/iowa_counties/tiles/12/1009/1531.png",
  "./map/iowa_counties/tiles/12/1010/1515.png",
  "./map/iowa_counties/tiles/12/1010/1516.png",
  "./map/iowa_counties/tiles/12/1010/1517.png",
  "./map/iowa_counties/tiles/12/1010/1518.png",
  "./map/iowa_counties/tiles/12/1010/1519.png",
  "./map/iowa_counties/tiles/12/1010/1520.png",
  "./map/iowa_counties/tiles/12/1010/1521.png",
  "./map/iowa_counties/tiles/12/1010/1522.png",
  "./map/iowa_counties/tiles/12/1010/1523.png",
  "./map/iowa_counties/tiles/12/1010/1524.png",
  "./map/iowa_counties/tiles/12/1010/1525.png",
  "./map/iowa_counties/tiles/12/1010/1526.png",
  "./map/iowa_counties/tiles/12/1010/1527.png",
  "./map/iowa_counties/tiles/12/1010/1528.png",
  "./map/iowa_counties/tiles/12/1010/1529.png",
  "./map/iowa_counties/tiles/12/1010/1530.png",
  "./map/iowa_counties/tiles/12/1010/1531.png",
  "./map/iowa_counties/tiles/12/1011/1515.png",
  "./map/iowa_counties/tiles/12/1011/1516.png",
  "./map/iowa_counties/tiles/12/1011/1517.png",
  "./map/iowa_counties/tiles/12/1011/1518.png",
  "./map/iowa_counties/tiles/12/1011/1519.png",
  "./map/iowa_counties/tiles/12/1011/1520.png",
  "./map/iowa_counties/tiles/12/1011/1521.png",
  "./map/iowa_counties/tiles/12/1011/1522.png",
  "./map/iowa_counties/tiles/12/1011/1523.png",
  "./map/iowa_counties/tiles/12/1011/1524.png",
  "./map/iowa_counties/tiles/12/1011/1525.png",
  "./map/iowa_counties/tiles/12/1011/1526.png",
  "./map/iowa_counties/tiles/12/1011/1527.png",
  "./map/iowa_counties/tiles/12/1011/1528.png",
  "./map/iowa_counties/tiles/12/1011/1529.png",
  "./map/iowa_counties/tiles/12/1011/1530.png",
  "./map/iowa_counties/tiles/12/1011/1531.png",
  "./map/iowa_counties/tiles/12/1012/1515.png",
  "./map/iowa_counties/tiles/12/1012/1516.png",
  "./map/iowa_counties/tiles/12/1012/1517.png",
  "./map/iowa_counties/tiles/12/1012/1518.png",
  "./map/iowa_counties/tiles/12/1012/1519.png",
  "./map/iowa_counties/tiles/12/1012/1520.png",
  "./map/iowa_counties/tiles/12/1012/1521.png",
  "./map/iowa_counties/tiles/12/1012/1522.png",
  "./map/iowa_counties/tiles/12/1012/1523.png",
  "./map/iowa_counties/tiles/12/1012/1524.png",
  "./map/iowa_counties/tiles/12/1012/1525.png",
  "./map/iowa_counties/tiles/12/1012/1526.png",
  "./map/iowa_counties/tiles/12/1012/1527.png",
  "./map/iowa_counties/tiles/12/1012/1528.png",
  "./map/iowa_counties/tiles/12/1012/1529.png",
  "./map/iowa_counties/tiles/12/1012/1530.png",
  "./map/iowa_counties/tiles/12/1012/1531.png",
  "./map/iowa_counties/tiles/12/1013/1515.png",
  "./map/iowa_counties/tiles/12/1013/1516.png",
  "./map/iowa_counties/tiles/12/1013/1517.png",
  "./map/iowa_counties/tiles/12/1013/1518.png",
  "./map/iowa_counties/tiles/12/1013/1519.png",
  "./map/iowa_counties/tiles/12/1013/1520.png",
  "./map/iowa_counties/tiles/12/1013/1521.png",
  "./map/iowa_counties/tiles/12/1013/1522.png",
  "./map/iowa_counties/tiles/12/1013/1523.png",
  "./map/iowa_counties/tiles/12/1013/1524.png",
  "./map/iowa_counties/tiles/12/1013/1525.png",
  "./map/iowa_counties/tiles/12/1013/1526.png",
  "./map/iowa_counties/tiles/12/1013/1527.png",
  "./map/iowa_counties/tiles/12/1013/1528.png",
  "./map/iowa_counties/tiles/12/1013/1529.png",
  "./map/iowa_counties/tiles/12/1013/1530.png",
  "./map/iowa_counties/tiles/12/1013/1531.png",
  "./map/iowa_counties/tiles/12/1014/1515.png",
  "./map/iowa_counties/tiles/12/1014/1516.png",
  "./map/iowa_counties/tiles/12/1014/1517.png",
  "./map/iowa_counties/tiles/12/1014/1518.png",
  "./map/iowa_counties/tiles/12/1014/1519.png",
  "./map/iowa_counties/tiles/12/1014/1520.png",
  "./map/iowa_counties/tiles/12/1014/1521.png",
  "./map/iowa_counties/tiles/12/1014/1522.png",
  "./map/iowa_counties/tiles/12/1014/1523.png",
  "./map/iowa_counties/tiles/12/1014/1524.png",
  "./map/iowa_counties/tiles/12/1014/1525.png",
  "./map/iowa_counties/tiles/12/1014/1526.png",
  "./map/iowa_counties/tiles/12/1014/1527.png",
  "./map/iowa_counties/tiles/12/1014/1528.png",
  "./map/iowa_counties/tiles/12/1014/1529.png",
  "./map/iowa_counties/tiles/12/1014/1530.png",
  "./map/iowa_counties/tiles/12/1014/1531.png",
  "./map/iowa_counties/tiles/12/1015/1515.png",
  "./map/iowa_counties/tiles/12/1015/1516.png",
  "./map/iowa_counties/tiles/12/1015/1517.png",
  "./map/iowa_counties/tiles/12/1015/1518.png",
  "./map/iowa_counties/tiles/12/1015/1519.png",
  "./map/iowa_counties/tiles/12/1015/1520.png",
  "./map/iowa_counties/tiles/12/1015/1521.png",
  "./map/iowa_counties/tiles/12/1015/1522.png",
  "./map/iowa_counties/tiles/12/1015/1523.png",
  "./map/iowa_counties/tiles/12/1015/1524.png",
  "./map/iowa_counties/tiles/12/1015/1525.png",
  "./map/iowa_counties/tiles/12/1015/1526.png",
  "./map/iowa_counties/tiles/12/1015/1527.png",
  "./map/iowa_counties/tiles/12/1015/1528.png",
  "./map/iowa_counties/tiles/12/1015/1529.png",
  "./map/iowa_counties/tiles/12/1015/1530.png",
  "./map/iowa_counties/tiles/12/1015/1531.png",
  "./map/iowa_counties/tiles/12/1016/1515.png",
  "./map/iowa_counties/tiles/12/1016/1516.png",
  "./map/iowa_counties/tiles/12/1016/1517.png",
  "./map/iowa_counties/tiles/12/1016/1518.png",
  "./map/iowa_counties/tiles/12/1016/1519.png",
  "./map/iowa_counties/tiles/12/1016/1520.png",
  "./map/iowa_counties/tiles/12/1016/1521.png",
  "./map/iowa_counties/tiles/12/1016/1522.png",
  "./map/iowa_counties/tiles/12/1016/1523.png",
  "./map/iowa_counties/tiles/12/1016/1524.png",
  "./map/iowa_counties/tiles/12/1016/1525.png",
  "./map/iowa_counties/tiles/12/1016/1526.png",
  "./map/iowa_counties/tiles/12/1016/1527.png",
  "./map/iowa_counties/tiles/12/1016/1528.png",
  "./map/iowa_counties/tiles/12/1016/1529.png",
  "./map/iowa_counties/tiles/12/1016/1530.png",
  "./map/iowa_counties/tiles/12/1016/1531.png",
  "./map/iowa_counties/tiles/12/1017/1515.png",
  "./map/iowa_counties/tiles/12/1017/1516.png",
  "./map/iowa_counties/tiles/12/1017/1517.png",
  "./map/iowa_counties/tiles/12/1017/1518.png",
  "./map/iowa_counties/tiles/12/1017/1519.png",
  "./map/iowa_counties/tiles/12/1017/1520.png",
  "./map/iowa_counties/tiles/12/1017/1521.png",
  "./map/iowa_counties/tiles/12/1017/1522.png",
  "./map/iowa_counties/tiles/12/1017/1523.png",
  "./map/iowa_counties/tiles/12/1017/1524.png",
  "./map/iowa_counties/tiles/12/1017/1525.png",
  "./map/iowa_counties/tiles/12/1017/1526.png",
  "./map/iowa_counties/tiles/12/1017/1527.png",
  "./map/iowa_counties/tiles/12/1017/1528.png",
  "./map/iowa_counties/tiles/12/1017/1529.png",
  "./map/iowa_counties/tiles/12/1017/1530.png",
  "./map/iowa_counties/tiles/12/1017/1531.png",
  "./map/iowa_counties/tiles/12/1018/1515.png",
  "./map/iowa_counties/tiles/12/1018/1516.png",
  "./map/iowa_counties/tiles/12/1018/1517.png",
  "./map/iowa_counties/tiles/12/1018/1518.png",
  "./map/iowa_counties/tiles/12/1018/1519.png",
  "./map/iowa_counties/tiles/12/1018/1520.png",
  "./map/iowa_counties/tiles/12/1018/1521.png",
  "./map/iowa_counties/tiles/12/1018/1522.png",
  "./map/iowa_counties/tiles/12/1018/1523.png",
  "./map/iowa_counties/tiles/12/1018/1524.png",
  "./map/iowa_counties/tiles/12/1018/1525.png",
  "./map/iowa_counties/tiles/12/1018/1526.png",
  "./map/iowa_counties/tiles/12/1018/1527.png",
  "./map/iowa_counties/tiles/12/1018/1528.png",
  "./map/iowa_counties/tiles/12/1018/1529.png",
  "./map/iowa_counties/tiles/12/1018/1530.png",
  "./map/iowa_counties/tiles/12/1018/1531.png",
  "./map/iowa_counties/tiles/12/1019/1515.png",
  "./map/iowa_counties/tiles/12/1019/1516.png",
  "./map/iowa_counties/tiles/12/1019/1517.png",
  "./map/iowa_counties/tiles/12/1019/1518.png",
  "./map/iowa_counties/tiles/12/1019/1519.png",
  "./map/iowa_counties/tiles/12/1019/1520.png",
  "./map/iowa_counties/tiles/12/1019/1521.png",
  "./map/iowa_counties/tiles/12/1019/1522.png",
  "./map/iowa_counties/tiles/12/1019/1523.png",
  "./map/iowa_counties/tiles/12/1019/1524.png",
  "./map/iowa_counties/tiles/12/1019/1525.png",
  "./map/iowa_counties/tiles/12/1019/1526.png",
  "./map/iowa_counties/tiles/12/1019/1527.png",
  "./map/iowa_counties/tiles/12/1019/1528.png",
  "./map/iowa_counties/tiles/12/1019/1529.png",
  "./map/iowa_counties/tiles/12/1019/1530.png",
  "./map/iowa_counties/tiles/12/1019/1531.png",
  "./map/iowa_counties/tiles/12/1020/1515.png",
  "./map/iowa_counties/tiles/12/1020/1516.png",
  "./map/iowa_counties/tiles/12/1020/1517.png",
  "./map/iowa_counties/tiles/12/1020/1518.png",
  "./map/iowa_counties/tiles/12/1020/1519.png",
  "./map/iowa_counties/tiles/12/1020/1520.png",
  "./map/iowa_counties/tiles/12/1020/1521.png",
  "./map/iowa_counties/tiles/12/1020/1522.png",
  "./map/iowa_counties/tiles/12/1020/1523.png",
  "./map/iowa_counties/tiles/12/1020/1524.png",
  "./map/iowa_counties/tiles/12/1020/1525.png",
  "./map/iowa_counties/tiles/12/1020/1526.png",
  "./map/iowa_counties/tiles/12/1020/1527.png",
  "./map/iowa_counties/tiles/12/1020/1528.png",
  "./map/iowa_counties/tiles/12/1020/1529.png",
  "./map/iowa_counties/tiles/12/1020/1530.png",
  "./map/iowa_counties/tiles/12/1020/1531.png",
  "./map/iowa_counties/tiles/12/1021/1515.png",
  "./map/iowa_counties/tiles/12/1021/1516.png",
  "./map/iowa_counties/tiles/12/1021/1517.png",
  "./map/iowa_counties/tiles/12/1021/1518.png",
  "./map/iowa_counties/tiles/12/1021/1519.png",
  "./map/iowa_counties/tiles/12/1021/1520.png",
  "./map/iowa_counties/tiles/12/1021/1521.png",
  "./map/iowa_counties/tiles/12/1021/1522.png",
  "./map/iowa_counties/tiles/12/1021/1523.png",
  "./map/iowa_counties/tiles/12/1021/1524.png",
  "./map/iowa_counties/tiles/12/1021/1525.png",
  "./map/iowa_counties/tiles/12/1021/1526.png",
  "./map/iowa_counties/tiles/12/1021/1527.png",
  "./map/iowa_counties/tiles/12/1021/1528.png",
  "./map/iowa_counties/tiles/12/1021/1529.png",
  "./map/iowa_counties/tiles/12/1021/1530.png",
  "./map/iowa_counties/tiles/12/1021/1531.png",
  "./map/iowa_counties/tiles/12/997/1515.png",
  "./map/iowa_counties/tiles/12/997/1516.png",
  "./map/iowa_counties/tiles/12/997/1517.png",
  "./map/iowa_counties/tiles/12/997/1518.png",
  "./map/iowa_counties/tiles/12/997/1519.png",
  "./map/iowa_counties/tiles/12/997/1520.png",
  "./map/iowa_counties/tiles/12/997/1521.png",
  "./map/iowa_counties/tiles/12/997/1522.png",
  "./map/iowa_counties/tiles/12/997/1523.png",
  "./map/iowa_counties/tiles/12/997/1524.png",
  "./map/iowa_counties/tiles/12/997/1525.png",
  "./map/iowa_counties/tiles/12/997/1526.png",
  "./map/iowa_counties/tiles/12/997/1527.png",
  "./map/iowa_counties/tiles/12/997/1528.png",
  "./map/iowa_counties/tiles/12/997/1529.png",
  "./map/iowa_counties/tiles/12/997/1530.png",
  "./map/iowa_counties/tiles/12/997/1531.png",
  "./map/iowa_counties/tiles/12/998/1515.png",
  "./map/iowa_counties/tiles/12/998/1516.png",
  "./map/iowa_counties/tiles/12/998/1517.png",
  "./map/iowa_counties/tiles/12/998/1518.png",
  "./map/iowa_counties/tiles/12/998/1519.png",
  "./map/iowa_counties/tiles/12/998/1520.png",
  "./map/iowa_counties/tiles/12/998/1521.png",
  "./map/iowa_counties/tiles/12/998/1522.png",
  "./map/iowa_counties/tiles/12/998/1523.png",
  "./map/iowa_counties/tiles/12/998/1524.png",
  "./map/iowa_counties/tiles/12/998/1525.png",
  "./map/iowa_counties/tiles/12/998/1526.png",
  "./map/iowa_counties/tiles/12/998/1527.png",
  "./map/iowa_counties/tiles/12/998/1528.png",
  "./map/iowa_counties/tiles/12/998/1529.png",
  "./map/iowa_counties/tiles/12/998/1530.png",
  "./map/iowa_counties/tiles/12/998/1531.png",
  "./map/iowa_counties/tiles/12/999/1515.png",
  "./map/iowa_counties/tiles/12/999/1516.png",
  "./map/iowa_counties/tiles/12/999/1517.png",
  "./map/iowa_counties/tiles/12/999/1518.png",
  "./map/iowa_counties/tiles/12/999/1519.png",
  "./map/iowa_counties/tiles/12/999/1520.png",
  "./map/iowa_counties/tiles/12/999/1521.png",
  "./map/iowa_counties/tiles/12/999/1522.png",
  "./map/iowa_counties/tiles/12/999/1523.png",
  "./map/iowa_counties/tiles/12/999/1524.png",
  "./map/iowa_counties/tiles/12/999/1525.png",
  "./map/iowa_counties/tiles/12/999/1526.png",
  "./map/iowa_counties/tiles/12/999/1527.png",
  "./map/iowa_counties/tiles/12/999/1528.png",
  "./map/iowa_counties/tiles/12/999/1529.png",
  "./map/iowa_counties/tiles/12/999/1530.png",
  "./map/iowa_counties/tiles/12/999/1531.png",
];

self.addEventListener("install", (evt) => {
  // do not exit the event until caching is completed.
  evt.waitUntil(
    // cache assets here
    // opens the cache if exists
    // otherwise it creates it
    // it is async task
    caches.open(staticCacheName).then((cache) => {
      console.log("Caching Shell assets.");
      cache.addAll(assets);
      console.log("Shell assets has been cached.");
    })
  );
});

self.addEventListener("activate", (evt) => {
  console.log("Service Worker has been activated.");
  evt.waitUntil(
    caches.keys().then((keys) => {
      // Prmise.all waits for all promises inside to resolve
      return Promise.all(
        keys
          .filter((key) => key !== staticCacheName)
          .map((key) => caches.delete(key))
      );
    })
  );
});

self.addEventListener("fetch", (evt) => {
  //console.log('Fetch Event', evt)
  evt.respondWith(
    // check if current request is in cache
    // match looks in all of the caches
    caches.match(evt.request).then((cacheRes) => {
      // cacheRes will be empty if request is not in the cache
      // if cachRes is emppty then continue with the fetch request
      // and get response from there
      return cacheRes || fetch(evt.request);
    })
  );
});

self.addEventListener("notificationclose", function (evt) {
  var notification = evt.notification;
  var primaryKey = notification.data.primaryKey;
  console.log("Closed notification: " + primaryKey);
});

self.addEventListener("notificationclick", function (evt) {
  var notification = evt.notification;
  var action = evt.action;
  if (action === "close") {
    notification.close();
  } else {
    // clear cache
    evt.waitUntil(
      caches.open(staticCacheName).then(function (cache) {
        assets.forEach((asset) => {
          cache.delete(asset).then(function (response) {});
        });
      })
    );
    // re-cache assets
    evt.waitUntil(
      caches.open(staticCacheName).then((cache) => {
        console.log("Caching Shell assets.");
        cache.addAll(assets);
        console.log("Shell assets has been cached.");
      })
    );

    // resetting sync status in indexeddb
    dbName = "MapUI";
    version = 2;

    evt.waitUntil(
      (request = indexedDB.open(dbName, version)),
      (request.onerror = function () {
        console.log("Can not open/create " + indexeddb._dbName);
      }),
      (request.onsuccess = function (event) {
        dbConn = request.result;
        dbConn.onerror = function (event) {
          console.log("Error: " + event.target.errorCode);
          reject("Error: " + event.target.errorCode);
        };
        let storeName = "SYNC_METER";
        let transaction = dbConn.transaction(storeName, "readwrite");
        let store = transaction.objectStore(storeName);
        // Make a request to clear all the data out of the object store
        var clearRequest = store.clear();
        clearRequest.onerror = function (event) {
          console.log("Unable to reset sync status.");
        };
        clearRequest.onsuccess = function (event) {
          console.log("SYNC_METER table is reset.");
        };
      })
    );
    clients.openWindow("./online-version/online.html");
    notification.close();
  }
});

self.addEventListener("push", function (e) {
  var body;

  if (e.data) {
    body = e.data.text();
  } else {
    body = "Push message no payload";
  }

  var options = {
    body: body,
    icon: "./img/icon/map.png",
    vibrate: [100, 50, 100],
    data: {
      dateOfArrival: Date.now(),
      primaryKey: 1,
    },
    actions: [
      {
        action: "update-data",
        title: "Update Data",
        icon: "img/icon/checkmark.jpg",
      },
      { action: "close", title: "Ignore", icon: "img/icon/xmark.png" },
    ],
  };
  e.waitUntil(
    self.registration.showNotification("Data Update Notification", options)
  );
});
